<html>
<head>
	<title>Hora de Dormir</title>

	<meta charset='utf-8'>

	<script src="jquery-1.9.1.min.js" type="text/javascript" charset="utf-8"></script>
	<link rel="stylesheet" type="text/css" href="estilos.css">
</head>
<body>

	<h1>Hora de Dormir</h1>

	<div class="formularios">
		<form class="acordarAs">
			<span>Quero acordar as</span><br>
			<input type="text" id="horas" name="horas" autocomplete="off">
			<span>:</span>
			<input type="text" id="minutos" name="minutos" autocomplete="off">
			<input id="btCalcularDormir" type="submit" value="Calcular">
		</form>

		<form class="dormirAgora">
			<span>Se eu for dormir agora...</span><br>
			<input id="btCalcularAcordar" type="submit"value="Zzz">
		</form>
	</div>

	<div class="sugestao">
		<h2></h2>
		<div class="6ciclos"></div> ou
		<div class="5ciclos"></div> ou
		<div class="4ciclos"></div> ou
		<div class="3ciclos"></div>
	</div>

	<script type="text/javascript" charset="utf-8">
		var apareceSugestao = function() {
			$('.sugestao').fadeIn('slow');
		};

		function addCiclo(date, ciclos) {
			return new Date(date.getTime() + ciclos*90*60000 + 7*60000);
		};

		function removeCiclo(date, ciclos) {
			return new Date(date.getTime() - ciclos*90*60000);
		};

		var sugerirHoraDormir = function() {
			var d = new Date();
			var horas = parseInt($('#horas').val());
			var minutos = parseInt($('#minutos').val());
			d.setUTCDate(d.getUTCDate() + 1)
			d.setHours(horas);
			d.setMinutes(minutos);
			$('.sugestao h2').text('Você deveria tentar dormir nestes horários:');
			$('.3ciclos').text(removeCiclo(d, 3).toLocaleTimeString());
			$('.4ciclos').text(removeCiclo(d, 4).toLocaleTimeString());
			$('.5ciclos').text(removeCiclo(d, 5).toLocaleTimeString());
			$('.6ciclos').text(removeCiclo(d, 6).toLocaleTimeString());
			$('.formularios').fadeOut('slow', apareceSugestao);
		};

		var sugerirHoraAcordar = function() {
			var d = new Date();
			$('.sugestao h2').text('Você deveria tentar acordar nestes horários:');
			$('.3ciclos').text(addCiclo(d, 3).toLocaleTimeString());
			$('.4ciclos').text(addCiclo(d, 4).toLocaleTimeString());
			$('.5ciclos').text(addCiclo(d, 5).toLocaleTimeString());
			$('.6ciclos').text(addCiclo(d, 6).toLocaleTimeString());
			$('.formularios').fadeOut('slow', apareceSugestao);
		};

		$('.acordarAs').submit(function() {
			sugerirHoraDormir();
			return false;
		});

		$('.dormirAgora').submit(function() {
			sugerirHoraAcordar();
			return false;
		});

	</script>

</body>
</html>